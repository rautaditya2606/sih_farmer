:root { --bg: #0c1220; --panel: #0f1b2e; --panel-alt: #122138; --text: #e9eef5; --text-dim: #9fb3c8; --accent: #2e7d32; --primary: #1565c0; --border: rgba(255,255,255,0.08); --chip: #0f2239; --bubble: #14253d; --user-bubble: #1557a5; --radius: 12px; --radius-lg: 16px; --shadow: 0 8px 24px rgba(0,0,0,0.25); }
* { box-sizing: border-box; }
body { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, 'Noto Sans'; margin: 0; background: var(--bg); color: var(--text); }

.chat-shell { max-width: 920px; height: 100dvh; margin: 0 auto; display: grid; grid-template-rows: auto 1fr auto; }

.chat-header { display: flex; align-items: center; justify-content: space-between; padding: 14px 18px; border-bottom: 1px solid var(--border); background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0)); position: sticky; top: 0; backdrop-filter: blur(6px); }
.chat-header .title { font-weight: 700; letter-spacing: 0.2px; }
.chat-header .subtitle { font-size: 12px; color: var(--text-dim); }

.chat-body { overflow: auto; padding: 18px; display: flex; flex-direction: column; gap: 14px; }
.messages { display: flex; flex-direction: column; gap: 12px; }

.msg { display: flex; gap: 8px; align-items: flex-end; }
.msg.user { justify-content: flex-end; }
.bubble { max-width: 78%; padding: 12px 14px; border-radius: var(--radius-lg); line-height: 1.5; white-space: pre-wrap; word-wrap: break-word; box-shadow: var(--shadow); }
.msg.user .bubble { background: var(--user-bubble); color: white; border-bottom-right-radius: 8px; }
.msg.assistant .bubble { background: var(--bubble); border: 1px solid var(--border); border-bottom-left-radius: 8px; }
.meta { font-size: 12px; color: var(--text-dim); margin: 6px 2px 0; }

/* Composer refined layout */
.composer { display: grid; grid-template-columns: auto 1fr auto; gap: 12px; align-items: center; padding: 10px 12px; border-top: 1px solid var(--border); background: rgba(11, 20, 33, 0.85); position: sticky; bottom: 0; backdrop-filter: blur(6px); }
.left-tools { display: inline-flex; gap: 8px; align-items: center; }
.center-input { display: grid; grid-template-rows: auto 1fr; gap: 6px; align-items: stretch; }
.right-send { display: inline-flex; }
.icon-btn { width: 40px; height: 40px; border-radius: 10px; }
textarea { min-height: 42px; }
.img-preview { max-width: 100%; justify-self: start; }

.icon-btn { background: var(--chip); color: #d5e6ff; border: 1px solid var(--border); width: 42px; height: 42px; display: grid; place-items: center; border-radius: 12px; cursor: pointer; transition: transform .06s ease, background .2s; }
.icon-btn:hover { background: #133255; }
.icon-btn:active { transform: translateY(1px); }
textarea { width: 100%; max-height: 180px; min-height: 44px; resize: none; padding: 12px 14px; border-radius: 12px; border: 1px solid var(--border); background: var(--panel); color: var(--text); line-height: 1.4; box-shadow: var(--shadow); }
.send { background: var(--accent); color: white; border: none; padding: 11px 18px; border-radius: 12px; cursor: pointer; font-weight: 600; transition: transform .06s ease, filter .2s; }
.send:hover { filter: brightness(1.05); }
.send:active { transform: translateY(1px); }
.hidden { display: none; }

.typing { display: inline-flex; gap: 4px; padding: 8px 12px; background: var(--bubble); border-radius: 12px; width: fit-content; border: 1px solid var(--border); }
.dot { width: 6px; height: 6px; border-radius: 50%; background: var(--text-dim); animation: blink 1.3s infinite ease-in-out; }
.dot:nth-child(2) { animation-delay: 0.15s; }
.dot:nth-child(3) { animation-delay: 0.3s; }
@keyframes blink { 0%,80%,100% { opacity: .2 } 40% { opacity: 1 } }

.feedback { display: inline-flex; gap: 6px; margin-top: 8px; }
.feedback button { background: var(--chip); color: #d5e6ff; border: 1px solid var(--border); padding: 6px 8px; border-radius: 10px; cursor: pointer; font-size: 12px; }
.feedback button:hover { background: #17355c; }

.img-preview { display: inline-flex; align-items: center; gap: 8px; background: var(--chip); border: 1px solid var(--border); padding: 6px 8px; border-radius: 12px; max-width: 200px; box-shadow: var(--shadow); }
.img-preview img { width: 36px; height: 36px; border-radius: 8px; object-fit: cover; border: 1px solid rgba(255,255,255,0.12); }
.img-preview button { background: transparent; color: #d5e6ff; border: none; cursor: pointer; font-size: 16px; line-height: 1; }
/* Ensure preview hides when hidden class present */
.img-preview.hidden { display: none !important; }

.copy-row { display: inline-flex; gap: 6px; margin-top: 6px; }
.copy-btn { background: var(--chip); color: #d5e6ff; border: 1px solid var(--border); padding: 6px 8px; border-radius: 10px; cursor: pointer; font-size: 12px; }
.copy-btn:hover { background: #17355c; }

/* Subtle scrollbar */
.chat-body::-webkit-scrollbar { width: 10px; }
.chat-body::-webkit-scrollbar-thumb { background: #1b2a44; border-radius: 10px; }
.chat-body::-webkit-scrollbar-track { background: transparent; }

@media (max-width: 640px) {
  .chat-body { padding: 14px; }
  .bubble { max-width: 90%; font-size: 15px; }
  .composer { grid-template-columns: auto 1fr auto; gap: 8px; padding: 8px 10px; }
  .icon-btn { width: 38px; height: 38px; border-radius: 10px; }
  textarea { min-height: 42px; }
} 